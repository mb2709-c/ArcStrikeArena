# Arc Strike Arena – 前端设计文档

## 产品定位
Arc Strike Arena 面向武道/电竞赛事，核心体验是「支持选手 + 隐私下注」。前端需要强调两点：FHE 带来赛中隐私（看不到权重），以及揭晓后公开的总权重用于判定胜者。

## 页面结构

1. **对决大厅**
   - 卡片显示选手头像、倒计时、当前奖池、已下注人数（公开）、状态标签。
   - 筛选项：状态（开放/待揭晓/已结算/取消）、最低 stake。
   - “发起对决”按钮仅对组织者可见，跳转表单。

2. **对决详情页**
   - 顶部 Hero：展示对阵双方信息、胜率条（揭晓后显示）、链上状态（进行中/待解密/已结算）。
   - **下注面板**：
     - 选择支持选手（Tab + 头像）。
     - 输入“技能强度”滑块，UI 文案说明：该值只在本地与链上密文中使用。
     - “生成密文”按钮调用 FHE SDK，完成后显示 handle 与 proof 摘要，再提交交易。
   - **时间线**：创建 → 下注中 → 解密请求 → 解密完成 → 领奖/退款。
   - **结果区**：当解密完成后，显示 `revealedA/B` 柱状图，标记胜方 & 支持者人数。
   - **操作按钮**：
     - 普通用户：`claimPrize`（胜方）、`claimRefund`（平局/取消）。
     - 组织者：`requestReplicaReveal`、`cancelReplicaDuel`。

3. **我的战队**
   - 罗列已下注对决、所支持选手、是否已领奖。
   - 提供 “查看我的密文” 按钮，调用 `getReplicaBetCipher` 供用户在本地验证。

## 视觉与交互

- **配色**：赛博紫 (#7027E0) + 亮青 (#2BF4FF) + 深灰背景 (#080A12)，对决双方分别用红/蓝渐变。
- **字体**：粗体标题（32px）配合能量条动画；正文 15–16px。
- **图像**：选手卡片带光效描边，强调竞技主题。揭晓后胜方头像出现火焰/粒子动画。
- **状态提示**：顶部 Banner 显示“FHE 密文累加中 / 正在请求解密 / 已揭晓”。
- **加载体验**：下注时弹出 Drawer 显示“正在生成密文 (FHE SDK)”的进度条；解密请求 pending 时显示 requestId。

## 功能要点

- Hook `useArcStrikeArena(duelId)`：
  - `placeBet(side, weight)`：生成密文 & proof，发送交易。
  - `requestReveal()`、`cancelDuel()`、`claimPrize()` 等二次封装。
  - 统一处理错误（如 AlreadyBet、BettingClosed）并映射到中文提示。
- 轮询：每 5 秒查询对决状态+用户投注信息；当 `revealPending` 为真增加顶部提醒。
- 将 `revealedA/B` 可视化为百分比（A/(A+B)）。

## 无障碍 & 响应式

- 所有按钮/Tab 可键盘导航；选手头像加 `aria-label` 描述。
- 色彩对比保持 ≥ 4.5:1，尤其在深色背景上。
- 移动端：卡片切换为纵向布局，下注面板变为底部抽屉；时间线使用 Step 条。
